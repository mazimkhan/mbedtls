{
    "tests": {
        "make-gcc": {
            "build": "make",
            "environment": {"MAKE": "make", "CC": "gcc"},
            "tests": ["basic"],
            "platforms": ["debian-i386", "debian-x64"]
        },
        "unix-make": {
            "build": "make",
            "environment": {"MAKE": "make", "CC": "gcc", "CFLAGS": "'-Werror -Wall -Wextra -Os'"},
            "platforms": ["ubuntu-17.10-x64"]
        },
        "make-no-std-func-nv-seed": {
            "config": "full-config-no-std-func-nv-seed",
            "build": "make",
            "environment": {"MAKE": "make", "CC": "gcc", "CFLAGS": "'-Werror -Wall -Wextra -O0'"},
            "platforms": ["ubuntu-17.10-x64"]
        },
        "make-no-srv": {
            "config": "full-config-no-srv",
            "build": "make",
            "environment": {"MAKE": "make", "CC": "gcc", "CFLAGS": "'-Werror -Wall -Wextra -O0'"},
            "platforms": ["ubuntu-17.10-x64"]
        },
        "make-no-client": {
            "config": "full-config-no-cli",
            "build": "make",
            "environment": {"MAKE": "make", "CC": "gcc", "CFLAGS": "'-Werror -Wall -Wextra -O0'"},
            "platforms": ["ubuntu-17.10-x64"]
        },
        "make-no-net-entropy": {
            "config": "full-config-no-net-entropy",
            "build": "make",
            "environment": {"MAKE": "make", "CC": "gcc", "MAKE_TARGET": "lib", "CFLAGS": "'-Werror -Wall -Wextra -O0 -std=c99 -pedantic'"},
            "platforms": ["ubuntu-17.10-x64"]
        },
        "make-full-config": {
            "config": "full-config-no-platform",
            "build": "make",
            "environment": {"MAKE": "make", "CC": "gcc",
                "CFLAGS": "'-Werror -Wall -Wextra -O0 -std=c99 -pedantic -D_DEFAULT_SOURCE'"},
            "tests": ["basic"],
            "platforms": ["ubuntu-17.10-x64"]
        },
        "make-shared": {
            "build": "make",
            "environment": {"MAKE": "make", "CC": "gcc", "SHARED": 1},
            "platforms": ["ubuntu-17.10-x64"]
        },
        "make-i386-on-x64": {
            "build": "make",
            "environment": {"MAKE": "make", "CC": "gcc", "CFLAGS": "'-Werror -Wall -Wextra -m32'"},
            "tests": ["basic"],
            "platforms": ["ubuntu-17.10-x64"]
        },
        "make-ilp32-on-x64": {
            "build": "make",
            "environment": {"MAKE": "make", "CC": "gcc", "CFLAGS": "'-Werror -Wall -Wextra -mx32'"},
            "tests": ["basic"],
            "platforms": ["ubuntu-17.10-x64"]
        },
        "make-32bit-bignum-limbs": {
            "config": "bignum-limbs",
            "build": "make",
            "environment": {"MAKE": "make", "CC": "gcc",
                            "CFLAGS": "'-Werror -Wall -Wextra -DMBEDTLS_HAVE_INT32'"},
            "tests": ["basic"],
            "platforms": ["ubuntu-17.10-x64"]
        },
        "make-64bit-bignum-limbs": {
            "config": "bignum-limbs",
            "build": "make",
            "environment": {"MAKE": "make", "CC": "gcc",
                            "CFLAGS": "'-Werror -Wall -Wextra -DMBEDTLS_HAVE_INT64'"},
            "tests": ["basic"],
            "platforms": ["ubuntu-17.10-x64"]
        },
        "make-gcc-arm": {
            "config": "baremetal",
            "build": "make",
            "environment": {"MAKE": "make", "CC": "arm-none-eabi-gcc",
                            "AR": "arm-none-eabi-ar", "LD": "arm-none-eabi-ld",
                            "CFLAGS": "'-Werror -Wall -Wextra'",
                            "MAKE_TARGET": "lib"},
            "platforms": ["ubuntu-17.10-x64"]
        },
        "make-gcc-arm-no-udbl": {
            "config": "baremetal-no-udbl",
            "build": "make",
            "environment": {"MAKE": "make", "CC": "arm-none-eabi-gcc",
                            "AR": "arm-none-eabi-ar", "LD": "arm-none-eabi-ld",
                            "CFLAGS": "'-Werror -Wall -Wextra'",
                            "MAKE_TARGET": "lib"},
            "tests": ["no_64bit_div"],
            "platforms": ["ubuntu-17.10-x64"]
        },
        "make-arm5": {
            "config": "baremetal-for-arm",
            "build": "make",
            "environment": {"MAKE": "make", "CC": "$ARMC5_BIN_DIR/armcc",
                            "AR": "$ARMC5_BIN_DIR/armar",
                            "WARNING_CFLAGS": "'--strict --c99'",
                            "MAKE_TARGET": "lib"},
            "platforms": ["ubuntu-17.10-x64"]
        },
        "make-arm6-v7-a": {
            "config": "baremetal-for-arm",
            "build": "make",
            "environment": {"MAKE": "make", "CC": "$ARMC6_BIN_DIR/armclang",
                            "ARM_TOOL_VARIANT": "ult",
                            "AR": "$ARMC6_BIN_DIR/armar",
                            "WARNING_CFLAGS": "'-xc -std=c99'",
                            "CFLAGS": "'--target=arm-arm-none-eabi -march=armv7-a'",
                            "MAKE_TARGET": "lib"},
            "platforms": ["ubuntu-17.10-x64"]
        },
        "make-arm6-v7-m": {
            "config": "baremetal-for-arm",
            "build": "make",
            "environment": {"MAKE": "make", "CC": "$ARMC6_BIN_DIR/armclang",
                            "ARM_TOOL_VARIANT": "ult",
                            "AR": "$ARMC6_BIN_DIR/armar",
                            "WARNING_CFLAGS": "'-xc -std=c99'",
                            "CFLAGS": "'--target=arm-arm-none-eabi -march=armv7-m'",
                            "MAKE_TARGET": "lib"},
            "platforms": ["ubuntu-17.10-x64"]
        },
        "make-arm6-v8.2-a": {
            "config": "baremetal-for-arm",
            "build": "make",
            "environment": {"MAKE": "make", "CC": "$ARMC6_BIN_DIR/armclang",
                            "ARM_TOOL_VARIANT": "ult",
                            "AR": "$ARMC6_BIN_DIR/armar",
                            "WARNING_CFLAGS": "'-xc -std=c99'",
                            "CFLAGS": "'--target=arm-arm-none-eabi -march=armv8.2-a'",
                            "MAKE_TARGET": "lib"},
            "platforms": ["ubuntu-17.10-x64"]
        },
        "make-arm6-v8.2-a-64bit": {
            "config": "baremetal-for-arm",
            "build": "make",
            "environment": {"MAKE": "make", "CC": "$ARMC6_BIN_DIR/armclang",
                            "ARM_TOOL_VARIANT": "ult",
                            "AR": "$ARMC6_BIN_DIR/armar",
                            "WARNING_CFLAGS": "'-xc -std=c99'",
                            "CFLAGS": "'--target=aarch64-arm-none-eabi -march=armv8.2-a'",
                            "MAKE_TARGET": "lib"},
            "platforms": ["ubuntu-17.10-x64"]
        },
        "make-arm6-v8-m.main": {
            "config": "baremetal-for-arm",
            "build": "make",
            "environment": {"MAKE": "make", "CC": "$ARMC6_BIN_DIR/armclang",
                            "ARM_TOOL_VARIANT": "ult",
                            "AR": "$ARMC6_BIN_DIR/armar",
                            "WARNING_CFLAGS": "'-xc -std=c99'",
                            "CFLAGS": "'--target=arm-arm-none-eabi -march=armv8-m.main'",
                            "MAKE_TARGET": "lib"},
            "platforms": ["ubuntu-17.10-x64"]
        },
        "make-allow-sha1-certs": {
            "config": "allow-sha1-in-certs",
            "build": "make",
            "environment": {"MAKE": "make", "CC": "gcc", "CFLAGS": "'-Werror -Wall -Wextra'"},
            "tests": ["basic", "ssl_opt_sha1"],
            "platforms": ["ubuntu-17.10-x64"]
        },
        "cross-build-windows": {
            "build": "make",
            "environment": {"MAKE": "make", "CC": "i686-w64-mingw32-gcc",
                            "AR": "i686-w64-mingw32-ar", "LD": "i686-w64-minggw32-ld",
                            "CFLAGS": "'-Werror -Wall -Wextra'", "WINDOWS_BUILD": "1",
                            "MAKE_TARGET": "'lib programs'"},
            "platforms": ["ubuntu-17.10-x64"]
        },
        "cross-build-tests-windows": {
            "build": "make",
            "environment": {"MAKE": "make", "CC": "i686-w64-mingw32-gcc",
                            "AR": "i686-w64-mingw32-ar", "LD": "i686-w64-minggw32-ld",
                            "CFLAGS": "'-Werror'", "WINDOWS_BUILD": "1"},
            "platforms": ["ubuntu-17.10-x64"]
        },
        "cross-build-dll": {
            "build": "make",
            "environment": {"MAKE": "make", "CC": "i686-w64-mingw32-gcc",
                            "AR": "i686-w64-mingw32-ar", "LD": "i686-w64-minggw32-ld",
                            "CFLAGS": "'-Werror -Wall -Wextra'", "WINDOWS_BUILD": "1",
                            "SHARED": "1", "MAKE_TARGET": "'lib programs'"},
            "platforms": ["ubuntu-17.10-x64"]
        },
        "cross-build-tests-dll": {
            "build": "make",
            "environment": {"MAKE": "make", "CC": "i686-w64-mingw32-gcc",
                            "AR": "i686-w64-mingw32-ar", "LD": "i686-w64-minggw32-ld",
                            "CFLAGS": "'-Werror'", "WINDOWS_BUILD": "1",
                            "SHARED": "1"},
            "platforms": ["ubuntu-17.10-x64"]
        },
        "cmake": {
            "build": "cmake",
            "environment": {"MAKE": "make", "CC": "gcc", "CMAKE_BUILD_TYPE": "Check"},
            "tests": ["basic"],
            "platforms": ["debian-i386", "debian-x64"]
        },
        "cmake-full":  {
            "build": "cmake",
            "environment": {"MAKE": "make", "CC": "gcc", "CMAKE_BUILD_TYPE": "Check"},
            "tests": ["full"],
            "platforms": ["debian-i386", "debian-x64"]
        },
        "cmake-asan": {
            "build": "cmake",
            "environment": {"MAKE": "make", "CC": "clang", "CMAKE_BUILD_TYPE": "ASan"},
            "tests": ["full"],
            "platforms": ["debian-i386", "debian-x64"]
        },
        "cmake-asan-gcc": {
            "build": "cmake",
            "environment": {"MAKE": "make", "CC": "gcc", "CMAKE_BUILD_TYPE": "ASan"},
            "tests": ["full"],
            "platforms": ["ubuntu-17.10-x64"]
        },
        "cmake-asan-gcc-sslv3": {
            "config": "sslv3",
            "build": "cmake",
            "environment": {"MAKE": "make", "CC": "gcc", "CMAKE_BUILD_TYPE": "ASan"},
            "tests": ["sslv3"],
            "platforms": ["ubuntu-17.10-x64"]
        },
        "cmake-asan-gcc-no-renegotiation": {
            "config": "no_ssl_renegotiation",
            "build": "cmake",
            "environment": {"MAKE": "make", "CC": "gcc", "CMAKE_BUILD_TYPE": "ASan"},
            "tests": ["basic", "ssl_opt"],
            "platforms": ["ubuntu-17.10-x64"]
        },
        "cmake-asan-gcc-no-max-fragment-len": {
            "config": "no-max-fragment-len",
            "build": "cmake",
            "environment": {"MAKE": "make", "CC": "gcc", "CMAKE_BUILD_TYPE": "ASan"},
            "tests": ["ssl_opt_mfl"],
            "platforms": ["ubuntu-17.10-x64"]
        },
        "cmake-asan-gcc-test-null-entropy": {
            "config": "test-null-entropy",
            "build": "cmake",
            "environment": {"MAKE": "make", "CC": "gcc", "UNSAFE_BUILD": "ON",
                "CFLAGS": "'-fsanitize=address -fno-common -O3'"},
            "tests": ["ctest"],
            "platforms": ["ubuntu-17.10-x64"]
        },
        "cmake-asan-rsa-no-crt": {
            "config": "rsa-no-cert",
            "build": "cmake",
            "environment": {"MAKE": "make", "CC": "gcc", "CMAKE_BUILD_TYPE": "ASan"},
            "tests": ["basic"],
            "platforms": ["ubuntu-17.10-x64"]
        },
        "cmake-memsan": {
            "config": "memsan",
            "build": "cmake",
            "environment": {"MAKE": "make", "CC": "clang", "CMAKE_BUILD_TYPE": "MemSan"},
            "tests": ["basic", "ssl_opt", "compat"],
            "platforms": ["ubuntu-17.10-x64"]
        },
        "cmake-release": {
            "build": "cmake",
            "environment": {"MAKE": "make", "CC": "clang", "CMAKE_BUILD_TYPE": "Release"},
            "tests": ["memcheck", "ssl_opt_memcheck", "compat_memcheck"],
            "platforms": ["ubuntu-17.10-x64"]
        },
        "cmake-clang-full-config": {
            "config": "full-config-no-mem-backtrace",
            "build": "cmake",
            "environment": {"MAKE": "make", "CC": "clang", "CMAKE_BUILD_TYPE": "Check"},
            "tests": ["basic", "ssl_opt", "compat_rc4_des_null"],
            "platforms": ["ubuntu-17.10-x64"]
        },
        "cmake-out-of-src": {
            "build": "cmake",
            "environment": {"MAKE": "make", "CC": "gcc", "CMAKE_BUILD_DIR": "build"},
            "platforms": ["ubuntu-17.10-x64"]
        },
        "curves": {
            "build": "cmake",
            "environment": {"MAKE": "make", "CC": "gcc", "CMAKE_BUILD_TYPE": "Debug"},
            "tests": ["curves"],
            "platforms": ["ubuntu-17.10-x64"]
        },
        "keyexchanges": {
            "build": "cmake",
            "environment": {"MAKE": "make", "CC": "gcc", "CMAKE_BUILD_TYPE": "Check"},
            "tests": ["keyexchanges"],
            "platforms": ["ubuntu-17.10-x64"]
        },
        "gmake-clang": {
            "build": "make",
            "environment": {"MAKE": "gmake", "CC": "clang"},
            "tests": ["basic"],
            "platforms": ["freebsd"]
        },
        "cmake-clang": {
            "build": "cmake",
            "environment": {"MAKE": "make", "CC": "clang", "CMAKE_BUILD_TYPE": "Check"},
            "tests": ["basic"],
            "platforms": ["freebsd"]
        },
        "mingw-make": {
            "build": "mingw-make",
            "tests": ["basic"],
            "platforms": ["windows-tls"]
        },
        "msvc12-32": {
            "build": "msvc12-32",
            "platforms": ["windows-tls"]
        },
        "msvc12-64": {
            "build": "msvc12-64",
            "platforms": ["windows-tls"]
        },
        "all.sh": {
            "script": "./tests/scripts/all.sh",
            "platforms": ["ubuntu-17.10-x64"]
        },
        "print-environment": {
            "script": "./scripts/output_env.sh",
            "platforms": ["ubuntu-17.10-x64"]
        },
        "check-recursion": {
            "script": "'./tests/scripts/recursion.pl library/*.c'",
            "platforms": ["ubuntu-17.10-x64"]
        },
        "check-generated-files": {
            "script": "./tests/scripts/check-generated-files.sh",
            "platforms": ["ubuntu-17.10-x64"]
        },
        "check-doxy-blocks": {
            "script": "./tests/scripts/check-doxy-blocks.pl",
            "platforms": ["ubuntu-17.10-x64"]
        },
        "check-names": {
            "script": "./tests/scripts/check-names.sh",
            "platforms": ["ubuntu-17.10-x64"]
        },
        "check-doxygen": {
            "script": "./tests/scripts/doxygen.sh",
            "platforms": ["ubuntu-17.10-x64"]
        }
    },
    "campaigns": {
        "commit-tests": [
                "make-gcc", "cmake", "cmake-full", "cmake-asan", "gmake-clang",
                "cmake-clang", "mingw-make", "msvc12-32", "msvc12-64"],
        "release-tests": ["all.sh"],
        "all-tests": ["print-environment", "cmake-asan-gcc",
                      "cmake-clang-full-config", "cmake-asan-gcc-sslv3",
                      "cmake-asan-gcc-no-renegotiation", "curves",
                      "keyexchanges", "unix-make", "make-full-config",
                      "make-no-std-func-nv-seed", "make-no-srv", "make-no-client",
                      "make-no-net-entropy", "cmake-asan-gcc-no-max-fragment-len",
                      "cmake-asan-gcc-test-null-entropy", "make-shared",
                      "make-i386-on-x64", "make-ilp32-on-x64",
                      "make-32bit-bignum-limbs", "make-gcc-arm",
                      "make-gcc-arm-no-udbl", "make-arm5", "make-arm6-v7-a",
                      "make-arm6-v7-m", "make-arm6-v8.2-a",
                      "make-arm6-v8.2-a-64bit", "make-arm6-v8-m.main",
                      "make-allow-sha1-certs", "cmake-asan-rsa-no-crt",
                      "cross-build-windows", "cross-build-tests-windows",
                      "cross-build-dll", "cross-build-tests-dll",
                      "cmake-memsan", "cmake-release", "cmake-out-of-src",
                      "check-recursion", "check-generated-files",
                      "check-doxy-blocks", "check-names", "check-doxygen"]
    },
    "jobs": {
        "mbedtls-commit-tests": {
            "campaigns": ["commit-tests"]
        },
        "release-tests": {
            "campaigns": ["all-tests"]
        },
        "nightly": {
            "campaigns": ["commit-tests", "release-tests"]
        }
    }
}

